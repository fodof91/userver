<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../favicon.svg">
<title>userver: engine::Task Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<link rel="stylesheet" href="../../doxygen-like.css">
<script src="../../highlight.pack.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="width: 100%;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a class="titlelink" href="../../index.html">userver
   </a>
   </div>
   <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework (beta)</a></div>
  </td>
  <td style="float: right; padding-right: 40px; padding-top: 15px;">
    <a href="https://github.com/userver-framework/userver" rel="noopener" target="_blank" class="titlelink">
      <img src="../../github_logo.svg" alt="Github"/>
    </a>
    &nbsp;
    <a href="https://t.me/+i3k5A6V0oFgwNmYy" rel="noopener" id='telegram_channel' target="_blank" class="titlelink">
      <img src="../../telegram_logo.svg" alt="Telegram"/>
    </a>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dc/d3f/namespaceengine.html">engine</a></li><li class="navelem"><a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="../../da/d9f/classengine_1_1Task-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">engine::Task Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Asynchronous task.  
 <a href="../../d8/d7c/classengine_1_1Task.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d8/da1/task_8hpp_source.html">userver/engine/task/task.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for engine::Task:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../da/d32/classengine_1_1Task__inherit__graph.png" border="0" usemap="#engine_1_1Task_inherit__map" alt="Inheritance graph"/></div>
<map name="engine_1_1Task_inherit__map" id="engine_1_1Task_inherit__map">
<area shape="rect" title="Asynchronous task." alt="" coords="5,56,108,83"/>
<area shape="rect" href="../../de/d97/classengine_1_1SharedTaskWithResult.html" title=" " alt="" coords="156,5,413,32"/>
<area shape="rect" href="../../db/d80/classengine_1_1TaskWithResult.html" title=" " alt="" coords="179,56,391,83"/>
<area shape="rect" href="../../db/d80/classengine_1_1TaskWithResult.html" title=" " alt="" coords="197,107,372,149"/>
<area shape="rect" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html" title=" " alt="" coords="461,115,649,141"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dde/classengine_1_1Task_1_1ContextAccessor.html">ContextAccessor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aabea33bd4d68cba68632a3fbbeb616cf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cf">Importance</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cfa07fa7a19aa722c635a15e94cb7f50416">Importance::kNormal</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cfa5a20548c220f372fc701cae6de94040b">Importance::kCritical</a>
<br />
 }</td></tr>
<tr class="memdesc:aabea33bd4d68cba68632a3fbbeb616cf"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> importance.  <a href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cf">More...</a><br /></td></tr>
<tr class="separator:aabea33bd4d68cba68632a3fbbeb616cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea155522d1b4987a303f44b6a00f1a56"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">State</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56ab10913c938482a8aa4ba85b7a1116cb4">State::kInvalid</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56aaf1adf7ec3673b4f5765cfbc5d43b7dc">State::kNew</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a023506f9e1203a14ea275f5e6acb2e1a">State::kQueued</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a2fc7fbf0d19294f85dd3880460dd3c0a">State::kRunning</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a6e09d95243f1f7bec7d0061e5831dc82">State::kSuspended</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a971493a769ad0aed23946733ede4a8f1">State::kCancelled</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a8751b92dc818d6876bde3504ab1efd4d">State::kCompleted</a>
<br />
 }</td></tr>
<tr class="memdesc:aea155522d1b4987a303f44b6a00f1a56"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> state.  <a href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">More...</a><br /></td></tr>
<tr class="separator:aea155522d1b4987a303f44b6a00f1a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155e386d1798ebcfd92fcbf2de26ab5b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5b">WaitMode</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5baa8581d033946099f6f8ccd5c912f5d5f">WaitMode::kSingleWaiter</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5ba181c4d77a868f22aa25836a27fb355c4">WaitMode::kMultipleWaiters</a>
<br />
 }</td></tr>
<tr class="memdesc:a155e386d1798ebcfd92fcbf2de26ab5b"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> wait mode.  <a href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5b">More...</a><br /></td></tr>
<tr class="separator:a155e386d1798ebcfd92fcbf2de26ab5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2cb8d26995d563ec0519f3ed5805d189"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a2cb8d26995d563ec0519f3ed5805d189">Task</a> ()</td></tr>
<tr class="memdesc:a2cb8d26995d563ec0519f3ed5805d189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="../../d8/d7c/classengine_1_1Task.html#a2cb8d26995d563ec0519f3ed5805d189">More...</a><br /></td></tr>
<tr class="separator:a2cb8d26995d563ec0519f3ed5805d189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a212d4384e3f45c77e5df390eacd4e1af"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a212d4384e3f45c77e5df390eacd4e1af">~Task</a> ()</td></tr>
<tr class="memdesc:a212d4384e3f45c77e5df390eacd4e1af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="../../d8/d7c/classengine_1_1Task.html#a212d4384e3f45c77e5df390eacd4e1af">More...</a><br /></td></tr>
<tr class="separator:a212d4384e3f45c77e5df390eacd4e1af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875d31097031c376bb5574327fd753c4"><td class="memItemLeft" align="right" valign="top"><a id="a875d31097031c376bb5574327fd753c4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Task</b> (<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&amp;) noexcept</td></tr>
<tr class="separator:a875d31097031c376bb5574327fd753c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ad143f47d9625fd79de414b8940b8af"><td class="memItemLeft" align="right" valign="top"><a id="a4ad143f47d9625fd79de414b8940b8af"></a>
<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&amp;) noexcept</td></tr>
<tr class="separator:a4ad143f47d9625fd79de414b8940b8af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa237da8cc6ad923b46e1d3dd1a030fec"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aa237da8cc6ad923b46e1d3dd1a030fec">IsValid</a> () const</td></tr>
<tr class="memdesc:aa237da8cc6ad923b46e1d3dd1a030fec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this <code><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a></code> object owns an actual task (not <code><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56ab10913c938482a8aa4ba85b7a1116cb4" title="Unusable.">State::kInvalid</a></code>)  <a href="../../d8/d7c/classengine_1_1Task.html#aa237da8cc6ad923b46e1d3dd1a030fec">More...</a><br /></td></tr>
<tr class="separator:aa237da8cc6ad923b46e1d3dd1a030fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6054a42ab82b13141086338ce9ec79c6"><td class="memItemLeft" align="right" valign="top"><a id="a6054a42ab82b13141086338ce9ec79c6"></a>
<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a6054a42ab82b13141086338ce9ec79c6">GetState</a> () const</td></tr>
<tr class="memdesc:a6054a42ab82b13141086338ce9ec79c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the task State. <br /></td></tr>
<tr class="separator:a6054a42ab82b13141086338ce9ec79c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914cb84ac258bb295849989fd29303f3"><td class="memItemLeft" align="right" valign="top"><a id="a914cb84ac258bb295849989fd29303f3"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a914cb84ac258bb295849989fd29303f3">IsFinished</a> () const</td></tr>
<tr class="memdesc:a914cb84ac258bb295849989fd29303f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the task finished execution. <br /></td></tr>
<tr class="separator:a914cb84ac258bb295849989fd29303f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a919b59746cb2603e7b189c4ac619d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a36a919b59746cb2603e7b189c4ac619d">Wait</a> () const noexcept(false)</td></tr>
<tr class="memdesc:a36a919b59746cb2603e7b189c4ac619d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or caller is cancelled. Can be called from coroutine context only. For non-coroutine context use <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a779d698abc4a6dd681e48441f513cd4a">BlockingWait()</a>.  <a href="../../d8/d7c/classengine_1_1Task.html#a36a919b59746cb2603e7b189c4ac619d">More...</a><br /></td></tr>
<tr class="separator:a36a919b59746cb2603e7b189c4ac619d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4570fc751a4ae795ff291b07620b662e"><td class="memTemplParams" colspan="2">template&lt;typename Rep , typename Period &gt; </td></tr>
<tr class="memitem:a4570fc751a4ae795ff291b07620b662e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a4570fc751a4ae795ff291b07620b662e">WaitFor</a> (const std::chrono::duration&lt; Rep, Period &gt; &amp;) const noexcept(false)</td></tr>
<tr class="memdesc:a4570fc751a4ae795ff291b07620b662e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or after the specified timeout or until caller is cancelled.  <a href="../../d8/d7c/classengine_1_1Task.html#a4570fc751a4ae795ff291b07620b662e">More...</a><br /></td></tr>
<tr class="separator:a4570fc751a4ae795ff291b07620b662e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b40cc5efcf7357b246b169fc6abc10"><td class="memTemplParams" colspan="2">template&lt;typename Clock , typename Duration &gt; </td></tr>
<tr class="memitem:a09b40cc5efcf7357b246b169fc6abc10"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a09b40cc5efcf7357b246b169fc6abc10">WaitUntil</a> (const std::chrono::time_point&lt; Clock, Duration &gt; &amp;) const noexcept(false)</td></tr>
<tr class="memdesc:a09b40cc5efcf7357b246b169fc6abc10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or until the specified time point is reached or until caller is cancelled.  <a href="../../d8/d7c/classengine_1_1Task.html#a09b40cc5efcf7357b246b169fc6abc10">More...</a><br /></td></tr>
<tr class="separator:a09b40cc5efcf7357b246b169fc6abc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5bb7666977214b44244dc6d3c45430b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#af5bb7666977214b44244dc6d3c45430b">WaitUntil</a> (<a class="el" href="../../de/d6a/classengine_1_1Deadline.html">Deadline</a>) const</td></tr>
<tr class="memdesc:af5bb7666977214b44244dc6d3c45430b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or until the specified deadline is reached or until caller is cancelled.  <a href="../../d8/d7c/classengine_1_1Task.html#af5bb7666977214b44244dc6d3c45430b">More...</a><br /></td></tr>
<tr class="separator:af5bb7666977214b44244dc6d3c45430b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af38546bfc7a0d3b86387980ce48bbb98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#af38546bfc7a0d3b86387980ce48bbb98">Detach</a> () &amp;&amp;</td></tr>
<tr class="memdesc:af38546bfc7a0d3b86387980ce48bbb98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches task, allowing it to continue execution out of scope.  <a href="../../d8/d7c/classengine_1_1Task.html#af38546bfc7a0d3b86387980ce48bbb98">More...</a><br /></td></tr>
<tr class="separator:af38546bfc7a0d3b86387980ce48bbb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7571e37ab539ef8cea8c29b69a604779"><td class="memItemLeft" align="right" valign="top"><a id="a7571e37ab539ef8cea8c29b69a604779"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a7571e37ab539ef8cea8c29b69a604779">RequestCancel</a> ()</td></tr>
<tr class="memdesc:a7571e37ab539ef8cea8c29b69a604779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queues task cancellation request. <br /></td></tr>
<tr class="separator:a7571e37ab539ef8cea8c29b69a604779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96cf988764c95fc158d9a3cf55ffe607"><td class="memItemLeft" align="right" valign="top"><a id="a96cf988764c95fc158d9a3cf55ffe607"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a96cf988764c95fc158d9a3cf55ffe607">SyncCancel</a> () noexcept</td></tr>
<tr class="memdesc:a96cf988764c95fc158d9a3cf55ffe607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels the task and suspends execution until it is finished. Can be called from coroutine context only. For non-coroutine context use <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a7571e37ab539ef8cea8c29b69a604779" title="Queues task cancellation request.">RequestCancel()</a> + <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a779d698abc4a6dd681e48441f513cd4a">BlockingWait()</a>. <br /></td></tr>
<tr class="separator:a96cf988764c95fc158d9a3cf55ffe607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28f948fafb961d05c43d8f4512963a3e"><td class="memItemLeft" align="right" valign="top"><a id="a28f948fafb961d05c43d8f4512963a3e"></a>
<a class="el" href="../../dc/d3f/namespaceengine.html#a0d5218b35f5861d406b7d3f8868d5cfd">TaskCancellationReason</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a28f948fafb961d05c43d8f4512963a3e">CancellationReason</a> () const</td></tr>
<tr class="memdesc:a28f948fafb961d05c43d8f4512963a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets task cancellation reason. <br /></td></tr>
<tr class="separator:a28f948fafb961d05c43d8f4512963a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779d698abc4a6dd681e48441f513cd4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a779d698abc4a6dd681e48441f513cd4a">BlockingWait</a> () const</td></tr>
<tr class="separator:a779d698abc4a6dd681e48441f513cd4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0a63c2f3a54e69f1895732982d6dbf88"><td class="memItemLeft" align="right" valign="top"><a id="a0a63c2f3a54e69f1895732982d6dbf88"></a>
static const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>GetStateName</b> (<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">State</a> state)</td></tr>
<tr class="separator:a0a63c2f3a54e69f1895732982d6dbf88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2bbea13143621815d829d7e87516d335"><td class="memItemLeft" align="right" valign="top"><a id="a2bbea13143621815d829d7e87516d335"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Task</b> (const <a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;)</td></tr>
<tr class="separator:a2bbea13143621815d829d7e87516d335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a8657600d602e6ea2302cdde8ce613"><td class="memItemLeft" align="right" valign="top"><a id="a35a8657600d602e6ea2302cdde8ce613"></a>
<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;)</td></tr>
<tr class="separator:a35a8657600d602e6ea2302cdde8ce613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d7bfae8e0aee62321eec611e4a3c8db"><td class="memItemLeft" align="right" valign="top"><a id="a6d7bfae8e0aee62321eec611e4a3c8db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a6d7bfae8e0aee62321eec611e4a3c8db">Invalidate</a> ()</td></tr>
<tr class="memdesc:a6d7bfae8e0aee62321eec611e4a3c8db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks task as invalid. <br /></td></tr>
<tr class="separator:a6d7bfae8e0aee62321eec611e4a3c8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Asynchronous task. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/da1/task_8hpp_source.html#l00032">32</a> of file <a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aabea33bd4d68cba68632a3fbbeb616cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabea33bd4d68cba68632a3fbbeb616cf">&#9670;&nbsp;</a></span>Importance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cf">engine::Task::Importance</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> importance. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aabea33bd4d68cba68632a3fbbeb616cfa07fa7a19aa722c635a15e94cb7f50416"></a>kNormal&#160;</td><td class="fielddoc"><p>Normal task. </p>
</td></tr>
<tr><td class="fieldname"><a id="aabea33bd4d68cba68632a3fbbeb616cfa5a20548c220f372fc701cae6de94040b"></a>kCritical&#160;</td><td class="fielddoc"><p>Critical task. The task will be started regardless of cancellations, e.g. due to user request, deadline or TaskProcessor overload. After the task starts, it may be cancelled. In particular, if it received any cancellation requests before starting, then it will start as cancelled. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/da1/task_8hpp_source.html#l00035">35</a> of file <a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a>.</p>

</div>
</div>
<a id="aea155522d1b4987a303f44b6a00f1a56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea155522d1b4987a303f44b6a00f1a56">&#9670;&nbsp;</a></span>State</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">engine::Task::State</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> state. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aea155522d1b4987a303f44b6a00f1a56ab10913c938482a8aa4ba85b7a1116cb4"></a>kInvalid&#160;</td><td class="fielddoc"><p>Unusable. </p>
</td></tr>
<tr><td class="fieldname"><a id="aea155522d1b4987a303f44b6a00f1a56aaf1adf7ec3673b4f5765cfbc5d43b7dc"></a>kNew&#160;</td><td class="fielddoc"><p>just created, not registered with task processor </p>
</td></tr>
<tr><td class="fieldname"><a id="aea155522d1b4987a303f44b6a00f1a56a023506f9e1203a14ea275f5e6acb2e1a"></a>kQueued&#160;</td><td class="fielddoc"><p>awaits execution </p>
</td></tr>
<tr><td class="fieldname"><a id="aea155522d1b4987a303f44b6a00f1a56a2fc7fbf0d19294f85dd3880460dd3c0a"></a>kRunning&#160;</td><td class="fielddoc"><p>executing user code </p>
</td></tr>
<tr><td class="fieldname"><a id="aea155522d1b4987a303f44b6a00f1a56a6e09d95243f1f7bec7d0061e5831dc82"></a>kSuspended&#160;</td><td class="fielddoc"><p>suspended, e.g. waiting for blocking call to complete </p>
</td></tr>
<tr><td class="fieldname"><a id="aea155522d1b4987a303f44b6a00f1a56a971493a769ad0aed23946733ede4a8f1"></a>kCancelled&#160;</td><td class="fielddoc"><p>exited user code because of external request </p>
</td></tr>
<tr><td class="fieldname"><a id="aea155522d1b4987a303f44b6a00f1a56a8751b92dc818d6876bde3504ab1efd4d"></a>kCompleted&#160;</td><td class="fielddoc"><p>exited user code with return or throw </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/da1/task_8hpp_source.html#l00047">47</a> of file <a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a>.</p>

</div>
</div>
<a id="a155e386d1798ebcfd92fcbf2de26ab5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a155e386d1798ebcfd92fcbf2de26ab5b">&#9670;&nbsp;</a></span>WaitMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5b">engine::Task::WaitMode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> wait mode. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a155e386d1798ebcfd92fcbf2de26ab5baa8581d033946099f6f8ccd5c912f5d5f"></a>kSingleWaiter&#160;</td><td class="fielddoc"><p>Can be awaited by at most one task at a time. </p>
</td></tr>
<tr><td class="fieldname"><a id="a155e386d1798ebcfd92fcbf2de26ab5ba181c4d77a868f22aa25836a27fb355c4"></a>kMultipleWaiters&#160;</td><td class="fielddoc"><p>Can be awaited by multiple tasks simultaneously. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/da1/task_8hpp_source.html#l00058">58</a> of file <a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2cb8d26995d563ec0519f3ed5805d189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cb8d26995d563ec0519f3ed5805d189">&#9670;&nbsp;</a></span>Task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">engine::Task::Task </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<p>Creates an invalid task. </p>

</div>
</div>
<a id="a212d4384e3f45c77e5df390eacd4e1af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a212d4384e3f45c77e5df390eacd4e1af">&#9670;&nbsp;</a></span>~Task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual engine::Task::~Task </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<p>When the task is still valid and is not finished, cancels it and waits until it finishes </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a779d698abc4a6dd681e48441f513cd4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779d698abc4a6dd681e48441f513cd4a">&#9670;&nbsp;</a></span>BlockingWait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void engine::Task::BlockingWait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Waits for the task in non-coroutine context (e.g. non-TaskProcessor's std::thread). </p>

</div>
</div>
<a id="af38546bfc7a0d3b86387980ce48bbb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af38546bfc7a0d3b86387980ce48bbb98">&#9670;&nbsp;</a></span>Detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void engine::Task::Detach </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> &amp;&amp;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detaches task, allowing it to continue execution out of scope. </p>
<dl class="section note"><dt>Note</dt><dd>After detach, <a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> becomes invalid </dd></dl>

</div>
</div>
<a id="aa237da8cc6ad923b46e1d3dd1a030fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa237da8cc6ad923b46e1d3dd1a030fec">&#9670;&nbsp;</a></span>IsValid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool engine::Task::IsValid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether this <code><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a></code> object owns an actual task (not <code><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56ab10913c938482a8aa4ba85b7a1116cb4" title="Unusable.">State::kInvalid</a></code>) </p>
<p>An invalid task cannot be used. The task becomes invalid after each of the following calls:</p>
<ol type="1">
<li><code><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a2cb8d26995d563ec0519f3ed5805d189" title="Default constructor.">Task()</a></code>, the default constructor</li>
<li><code><a class="el" href="../../d8/d7c/classengine_1_1Task.html#af38546bfc7a0d3b86387980ce48bbb98" title="Detaches task, allowing it to continue execution out of scope.">Detach()</a></code></li>
<li><code>Get()</code> (see <code><a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">engine::TaskWithResult</a></code>) </li>
</ol>

</div>
</div>
<a id="a36a919b59746cb2603e7b189c4ac619d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a919b59746cb2603e7b189c4ac619d">&#9670;&nbsp;</a></span>Wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void engine::Task::Wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Suspends execution until the task finishes or caller is cancelled. Can be called from coroutine context only. For non-coroutine context use <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a779d698abc4a6dd681e48441f513cd4a">BlockingWait()</a>. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../de/dae/classengine_1_1WaitInterruptedException.html">WaitInterruptedException</a></td><td>when <code><a class="el" href="../../db/df2/cancel_8hpp.html#a561f4b1f4b6d9b12f41a8f6a0d98547e" title="Checks for pending cancellation requests.">current_task::IsCancelRequested()</a></code> and no TaskCancellationBlockers are present. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4570fc751a4ae795ff291b07620b662e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4570fc751a4ae795ff291b07620b662e">&#9670;&nbsp;</a></span>WaitFor()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Rep , typename Period &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void engine::Task::WaitFor </td>
          <td>(</td>
          <td class="paramtype">const std::chrono::duration&lt; Rep, Period &gt; &amp;&#160;</td>
          <td class="paramname"><em>duration</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Suspends execution until the task finishes or after the specified timeout or until caller is cancelled. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../de/dae/classengine_1_1WaitInterruptedException.html">WaitInterruptedException</a></td><td>when <code><a class="el" href="../../db/df2/cancel_8hpp.html#a561f4b1f4b6d9b12f41a8f6a0d98547e" title="Checks for pending cancellation requests.">current_task::IsCancelRequested()</a></code> and no TaskCancellationBlockers are present. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/da1/task_8hpp_source.html#l00208">208</a> of file <a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a>.</p>

</div>
</div>
<a id="a09b40cc5efcf7357b246b169fc6abc10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09b40cc5efcf7357b246b169fc6abc10">&#9670;&nbsp;</a></span>WaitUntil() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock , typename Duration &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void engine::Task::WaitUntil </td>
          <td>(</td>
          <td class="paramtype">const std::chrono::time_point&lt; Clock, Duration &gt; &amp;&#160;</td>
          <td class="paramname"><em>until</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Suspends execution until the task finishes or until the specified time point is reached or until caller is cancelled. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../de/dae/classengine_1_1WaitInterruptedException.html">WaitInterruptedException</a></td><td>when <code><a class="el" href="../../db/df2/cancel_8hpp.html#a561f4b1f4b6d9b12f41a8f6a0d98547e" title="Checks for pending cancellation requests.">current_task::IsCancelRequested()</a></code> and no TaskCancellationBlockers are present. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/da1/task_8hpp_source.html#l00214">214</a> of file <a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a>.</p>

</div>
</div>
<a id="af5bb7666977214b44244dc6d3c45430b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5bb7666977214b44244dc6d3c45430b">&#9670;&nbsp;</a></span>WaitUntil() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void engine::Task::WaitUntil </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6a/classengine_1_1Deadline.html">Deadline</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspends execution until the task finishes or until the specified deadline is reached or until caller is cancelled. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../de/dae/classengine_1_1WaitInterruptedException.html">WaitInterruptedException</a></td><td>when <code><a class="el" href="../../db/df2/cancel_8hpp.html#a561f4b1f4b6d9b12f41a8f6a0d98547e" title="Checks for pending cancellation requests.">current_task::IsCancelRequested()</a></code> and no TaskCancellationBlockers are present. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>userver/engine/task/<a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/>
<a id='page_edit' style="float:left; padding-left: 7pt;" href="#">⚒ Редактировать страницу</a>
<address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
<script type="text/javascript">
const LOWER_CASE_TRANSLITTERATION_MAPPING = {
    "а":"a", "б":"b", "в":"v", "г":"g", "д":"d", "е":"e", "ё":"jo", "ж":"zh",
    "з":"z", "и":"i", "й":"jj", "к":"k", "л":"l", "м":"m", "н":"n", "о":"o",
    "п":"p", "р":"r", "с":"s", "т":"t", "у":"u", "ф":"f", "х":"x", "ц":"c",
    "ч":"ch", "ш":"sh", "щ":"shh", "ъ":"\'", "ы":"y", "ь":"\'", "э":"je",
    "ю":"ju", "я":"ja"
};
const DOXYGEN_DIAMOND_STRING = '◆\u00A0' // ◆&nbsp;
function make_id(raw_id) {
    return raw_id.toLowerCase().split('').map(function (char) {
        return LOWER_CASE_TRANSLITTERATION_MAPPING[char] || char;
    }).join('').replace(/\W/g, '');
}
const html_escape = function () {
    const p = document.createElement('p');
    return function (text) {
        p.textContent = text;
        return p.innerHTML;
    };
}();
function setup_page_edit() {
    let href = window.location.href;
    const idx = href.indexOf('md_ru_');
    if (idx === -1) {
        $('#page_edit').hide();
        return;
    }
    href = href.substring(idx).split('.html')[0];
    href = href.split('#')[0];
    href = href.replace('md_ru_', 'https://wiki.yandex-team.ru/taxi/backend/');
    href = href.replaceAll('_', '/');
    $('#page_edit').attr("href", href + '/.edit');
}
function draw_toc() {
    let headers = $(':header');
    if (headers.length === 0) {
        return;
    }
    let sidenav_content = '<div id="mySidenav" class="sidenav">';
    sidenav_content += '<h2>Table of contents</h2>';
    headers.each(function() {
        let index = parseInt(this.nodeName.substring(1)) - 1;
        const header = $(this);
        let id = header.attr('id');
        if (!id) {
          id = make_id(header.text())
          header.attr('id', id);
        }
        let header_text = header.text()
        if (header_text.startsWith(DOXYGEN_DIAMOND_STRING)) {
            ++index;
            header_text = header_text.substring(DOXYGEN_DIAMOND_STRING.length);
        }
        sidenav_content += ''
          + '<a href="#' + id + '" style="padding-left: ' + index * 15 + 'px">'
          + '•&nbsp;' + html_escape(header_text)
          + '</a>'
        ;
        header.append(' <a class="hoverlink" href="#' + id + '">🔗</a>')
    });
    sidenav_content += '</div>';
    $(sidenav_content).insertAfter('.header');
}
function highlight_code() {
    if (window.location.href.indexOf("pp_source") !== -1
        || window.location.href.indexOf("cpp-example") !== -1) {
        // Header listing is already nicely highlighted by Doxygen
        return;
    }
    hljs.configure({
        tabReplace: '    ' // 4 spaces
    });
    hljs.registerAliases('py', {languageName: 'python'});
    hljs.registerAliases('sh', {languageName: 'shell'});
    hljs.registerAliases('bash', {languageName: 'shell'});
    hljs.registerAliases('yml', {languageName: 'yaml'});
    hljs.registerAliases('plain', {languageName: 'plaintext'});
    hljs.registerAliases('tskv', {languageName: 'plaintext'});
    $(".fragment").each(function() {
        const node = $(this);
        let data = '';
        let language = '';
        let requires_higlighting = true;
        node.children('div.line').each(function(i) {
            line = $(this).text();
            // Doxygen 1.8.11 workaround to remove line numbers.
            // No line numbers added in Doxygen 1.8.13
            line = line.replace(/^ *\d+\xA0/, '');
            if (i === 0) {
                line = line.trimLeft().replace(/^# /, '');
                if (line === 'autodetect') {
                    return true;
                } else if (hljs.getLanguage(line)) {
                    language = line;
                    return true;
                } else {
                    requires_higlighting = false;
                    return false;
                }
            }
            data += line + '\n';
        });
        if (requires_higlighting === false) {
            return;
        }
        if (language !== '') {
            data = hljs.highlight(language, data).value;
        } else {
            data = hljs.highlightAuto(data).value;
        }
        node.replaceWith('<div class="fragment"><pre>' + data + '</pre></div>');
    });
}
function setup_if_landing() {
    if (document.getElementById('landing_logo_id') === null) {
        return false;
    }
    $('#titlearea').hide();
    const main_nav = $('#main-nav')
    main_nav.addClass('main-nav-landing');
    main_nav.append('<hr>');
    $('.header').hide();
    $('body').css('background-color', 'black');
    $('#page_edit').hide();
    return true;
}
function sticky_menu() {
    const main_nav = $('#main-nav');
    const menu_y_position = 94;
    const search_results_window = $('#MSearchResultsWindow');
    var menu_is_sticky = false;
    const stick = function () {
        if ($(this).scrollTop() > menu_y_position) {
            if (menu_is_sticky) return;
            search_results_window.addClass('stickySearchResults');
            main_nav.addClass('stickyHeader');
            menu_is_sticky = true;
        } else {
            if (!menu_is_sticky) return;
            search_results_window.removeClass('stickySearchResults');
            // 'top' property of the results window is computed by Doxygen JS
            // and it may give bad results if the computation is invoked at the
            // middle of the page.
            //
            // Hiding the window. Doxygen will recompute and show it on new
            // user input.
            search_results_window.hide();
            main_nav.removeClass('stickyHeader');
            menu_is_sticky = false;
        }
    };
    stick();  // on page refresh draw the menu on a right position
    $(window).on("scroll", stick);
}
function telegram_channel_language() {
  if (/^ru/.test(navigator.language)) {
    const channel = $('#telegram_channel');
    if (channel) {
      channel.attr('href', 'https://t.me/+AdadhDPVG5xhNWRi');
    }
  }
}
$(function() {
    if (setup_if_landing()) return;
    draw_toc();
    highlight_code();
    setup_page_edit();
    telegram_channel_language();
    sticky_menu();
});
</script>
</body>
</html>
