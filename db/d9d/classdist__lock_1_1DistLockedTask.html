<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../favicon.svg">
<title>userver: dist_lock::DistLockedTask Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<link rel="stylesheet" href="../../doxygen-like.css">
<script src="../../highlight.pack.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="width: 100%;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a class="titlelink" href="../../index.html">userver
   </a>
   </div>
   <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework (beta)</a></div>
  </td>
  <td style="float: right; padding-right: 40px; padding-top: 15px;">
    <a href="https://github.com/userver-framework/userver" rel="noopener" target="_blank" class="titlelink">
      <img src="../../github_logo.svg" alt="Github"/>
    </a>
    &nbsp;
    <a href="https://t.me/+i3k5A6V0oFgwNmYy" rel="noopener" id='telegram_channel' target="_blank" class="titlelink">
      <img src="../../telegram_logo.svg" alt="Telegram"/>
    </a>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../da/d4a/namespacedist__lock.html">dist_lock</a></li><li class="navelem"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d5/d33/classdist__lock_1_1DistLockedTask-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dist_lock::DistLockedTask Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="../../dc/db7/group__userver__concurrency.html">Concurrency</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html">userver/dist_lock/dist_locked_task.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for dist_lock::DistLockedTask:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d4d/classdist__lock_1_1DistLockedTask__inherit__graph.png" border="0" usemap="#dist__lock_1_1DistLockedTask_inherit__map" alt="Inheritance graph"/></div>
<map name="dist__lock_1_1DistLockedTask_inherit__map" id="dist__lock_1_1DistLockedTask_inherit__map">
<area shape="rect" title=" " alt="" coords="5,169,193,196"/>
<area shape="rect" href="../../db/d80/classengine_1_1TaskWithResult.html" title=" " alt="" coords="12,80,187,121"/>
<area shape="rect" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task." alt="" coords="48,5,151,32"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for dist_lock::DistLockedTask:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d66/classdist__lock_1_1DistLockedTask__coll__graph.png" border="0" usemap="#dist__lock_1_1DistLockedTask_coll__map" alt="Collaboration graph"/></div>
<map name="dist__lock_1_1DistLockedTask_coll__map" id="dist__lock_1_1DistLockedTask_coll__map">
<area shape="rect" title=" " alt="" coords="5,169,193,196"/>
<area shape="rect" href="../../db/d80/classengine_1_1TaskWithResult.html" title=" " alt="" coords="12,80,187,121"/>
<area shape="rect" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task." alt="" coords="48,5,151,32"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:acebbf79897985008b6086473fe7a6795"><td class="memItemLeft" align="right" valign="top"><a id="acebbf79897985008b6086473fe7a6795"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>WorkerFunc</b> = std::function&lt; void()&gt;</td></tr>
<tr class="separator:acebbf79897985008b6086473fe7a6795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classengine_1_1Task"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classengine_1_1Task')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../d8/d7c/classengine_1_1Task.html">engine::Task</a></td></tr>
<tr class="memitem:aabea33bd4d68cba68632a3fbbeb616cf inherit pub_types_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cf">Importance</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cfa07fa7a19aa722c635a15e94cb7f50416">Importance::kNormal</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cfa5a20548c220f372fc701cae6de94040b">Importance::kCritical</a>
<br />
 }</td></tr>
<tr class="memdesc:aabea33bd4d68cba68632a3fbbeb616cf"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> importance.  <a href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cf">More...</a><br /></td></tr>
<tr class="separator:aabea33bd4d68cba68632a3fbbeb616cf inherit pub_types_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea155522d1b4987a303f44b6a00f1a56 inherit pub_types_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">State</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56ab10913c938482a8aa4ba85b7a1116cb4">State::kInvalid</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56aaf1adf7ec3673b4f5765cfbc5d43b7dc">State::kNew</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a023506f9e1203a14ea275f5e6acb2e1a">State::kQueued</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a2fc7fbf0d19294f85dd3880460dd3c0a">State::kRunning</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a6e09d95243f1f7bec7d0061e5831dc82">State::kSuspended</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a971493a769ad0aed23946733ede4a8f1">State::kCancelled</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56a8751b92dc818d6876bde3504ab1efd4d">State::kCompleted</a>
<br />
 }</td></tr>
<tr class="memdesc:aea155522d1b4987a303f44b6a00f1a56"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> state.  <a href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">More...</a><br /></td></tr>
<tr class="separator:aea155522d1b4987a303f44b6a00f1a56 inherit pub_types_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155e386d1798ebcfd92fcbf2de26ab5b inherit pub_types_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5b">WaitMode</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5baa8581d033946099f6f8ccd5c912f5d5f">WaitMode::kSingleWaiter</a>, 
<br />
&#160;&#160;<a class="el" href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5ba181c4d77a868f22aa25836a27fb355c4">WaitMode::kMultipleWaiters</a>
<br />
 }</td></tr>
<tr class="memdesc:a155e386d1798ebcfd92fcbf2de26ab5b"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a> wait mode.  <a href="../../d8/d7c/classengine_1_1Task.html#a155e386d1798ebcfd92fcbf2de26ab5b">More...</a><br /></td></tr>
<tr class="separator:a155e386d1798ebcfd92fcbf2de26ab5b inherit pub_types_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1f9b35564f90b9c20d7dd885196d6170"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#a1f9b35564f90b9c20d7dd885196d6170">DistLockedTask</a> ()=default</td></tr>
<tr class="separator:a1f9b35564f90b9c20d7dd885196d6170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af36b6fc598efd16fc164878afcab92f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#af36b6fc598efd16fc164878afcab92f1">DistLockedTask</a> (std::string name, WorkerFunc worker_func, std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt; strategy, const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;settings={}, <a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1">DistLockWaitingMode</a> mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8">DistLockWaitingMode::kWait</a>, <a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460">DistLockRetryMode</a> retry_mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460a7d38367a395df05d79abf44f3bd9f7cb">DistLockRetryMode::kRetry</a>)</td></tr>
<tr class="separator:af36b6fc598efd16fc164878afcab92f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89c736c138f5a3fbcea9f141473e7506"><td class="memItemLeft" align="right" valign="top"><a id="a89c736c138f5a3fbcea9f141473e7506"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#a89c736c138f5a3fbcea9f141473e7506">DistLockedTask</a> (engine::TaskProcessor &amp;task_processor, std::string name, WorkerFunc worker_func, std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt; strategy, const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;settings={}, <a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1">DistLockWaitingMode</a> mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8">DistLockWaitingMode::kWait</a>, <a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460">DistLockRetryMode</a> retry_mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460a7d38367a395df05d79abf44f3bd9f7cb">DistLockRetryMode::kRetry</a>)</td></tr>
<tr class="memdesc:a89c736c138f5a3fbcea9f141473e7506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a> to be run in a specific engine::TaskProcessor. <br /></td></tr>
<tr class="separator:a89c736c138f5a3fbcea9f141473e7506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61b590719a0a20f1ad5729c269ce1193"><td class="memItemLeft" align="right" valign="top">std::optional&lt; std::chrono::steady_clock::duration &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#a61b590719a0a20f1ad5729c269ce1193">GetLockedDuration</a> () const</td></tr>
<tr class="separator:a61b590719a0a20f1ad5729c269ce1193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classengine_1_1TaskWithResult"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classengine_1_1TaskWithResult')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">engine::TaskWithResult&lt; void &gt;</a></td></tr>
<tr class="memitem:a96d8a7baf3ce37492be89aef63390e06 inherit pub_methods_classengine_1_1TaskWithResult"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html#a96d8a7baf3ce37492be89aef63390e06">TaskWithResult</a> ()=default</td></tr>
<tr class="memdesc:a96d8a7baf3ce37492be89aef63390e06 inherit pub_methods_classengine_1_1TaskWithResult"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="../../db/d80/classengine_1_1TaskWithResult.html#a96d8a7baf3ce37492be89aef63390e06">More...</a><br /></td></tr>
<tr class="separator:a96d8a7baf3ce37492be89aef63390e06 inherit pub_methods_classengine_1_1TaskWithResult"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5694e7c476ba626731638e50781de18 inherit pub_methods_classengine_1_1TaskWithResult"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html#ad5694e7c476ba626731638e50781de18">TaskWithResult</a> (TaskProcessor &amp;task_processor, <a class="el" href="../../d8/d7c/classengine_1_1Task.html#aabea33bd4d68cba68632a3fbbeb616cf">Task::Importance</a> importance, <a class="el" href="../../de/d6a/classengine_1_1Deadline.html">Deadline</a> deadline, std::shared_ptr&lt; utils::impl::WrappedCall&lt; void &gt;&gt; &amp;&amp;wrapped_call_ptr)</td></tr>
<tr class="memdesc:ad5694e7c476ba626731638e50781de18 inherit pub_methods_classengine_1_1TaskWithResult"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor, for internal use only.  <a href="../../db/d80/classengine_1_1TaskWithResult.html#ad5694e7c476ba626731638e50781de18">More...</a><br /></td></tr>
<tr class="separator:ad5694e7c476ba626731638e50781de18 inherit pub_methods_classengine_1_1TaskWithResult"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d047a8c75b7f4a29012cde6f39b7f92 inherit pub_methods_classengine_1_1TaskWithResult"><td class="memItemLeft" align="right" valign="top"><a id="a7d047a8c75b7f4a29012cde6f39b7f92"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TaskWithResult</b> (const <a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">TaskWithResult</a> &amp;)=delete</td></tr>
<tr class="separator:a7d047a8c75b7f4a29012cde6f39b7f92 inherit pub_methods_classengine_1_1TaskWithResult"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6baff570e083014a7382267fde861c inherit pub_methods_classengine_1_1TaskWithResult"><td class="memItemLeft" align="right" valign="top"><a id="aae6baff570e083014a7382267fde861c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TaskWithResult</b> (<a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">TaskWithResult</a> &amp;&amp;) noexcept=default</td></tr>
<tr class="separator:aae6baff570e083014a7382267fde861c inherit pub_methods_classengine_1_1TaskWithResult"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649148b516203ec13aaa432686dcb21c inherit pub_methods_classengine_1_1TaskWithResult"><td class="memItemLeft" align="right" valign="top"><a id="a649148b516203ec13aaa432686dcb21c"></a>
<a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">TaskWithResult</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">TaskWithResult</a> &amp;)=delete</td></tr>
<tr class="separator:a649148b516203ec13aaa432686dcb21c inherit pub_methods_classengine_1_1TaskWithResult"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522b8776a9f138c1a8a6acc73bfd41ef inherit pub_methods_classengine_1_1TaskWithResult"><td class="memItemLeft" align="right" valign="top"><a id="a522b8776a9f138c1a8a6acc73bfd41ef"></a>
<a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">TaskWithResult</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html">TaskWithResult</a> &amp;&amp;) noexcept=default</td></tr>
<tr class="separator:a522b8776a9f138c1a8a6acc73bfd41ef inherit pub_methods_classengine_1_1TaskWithResult"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5802799716e29c5cd038fb28a9340d inherit pub_methods_classengine_1_1TaskWithResult"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d80/classengine_1_1TaskWithResult.html#a3b5802799716e29c5cd038fb28a9340d">Get</a> () noexcept(false)</td></tr>
<tr class="memdesc:a3b5802799716e29c5cd038fb28a9340d inherit pub_methods_classengine_1_1TaskWithResult"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns (or rethrows) the result of task invocation. After return from this method the task is not valid.  <a href="../../db/d80/classengine_1_1TaskWithResult.html#a3b5802799716e29c5cd038fb28a9340d">More...</a><br /></td></tr>
<tr class="separator:a3b5802799716e29c5cd038fb28a9340d inherit pub_methods_classengine_1_1TaskWithResult"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classengine_1_1Task"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classengine_1_1Task')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d8/d7c/classengine_1_1Task.html">engine::Task</a></td></tr>
<tr class="memitem:a2cb8d26995d563ec0519f3ed5805d189 inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a2cb8d26995d563ec0519f3ed5805d189">Task</a> ()</td></tr>
<tr class="memdesc:a2cb8d26995d563ec0519f3ed5805d189 inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="../../d8/d7c/classengine_1_1Task.html#a2cb8d26995d563ec0519f3ed5805d189">More...</a><br /></td></tr>
<tr class="separator:a2cb8d26995d563ec0519f3ed5805d189 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a212d4384e3f45c77e5df390eacd4e1af inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a212d4384e3f45c77e5df390eacd4e1af">~Task</a> ()</td></tr>
<tr class="memdesc:a212d4384e3f45c77e5df390eacd4e1af inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="../../d8/d7c/classengine_1_1Task.html#a212d4384e3f45c77e5df390eacd4e1af">More...</a><br /></td></tr>
<tr class="separator:a212d4384e3f45c77e5df390eacd4e1af inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875d31097031c376bb5574327fd753c4 inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a875d31097031c376bb5574327fd753c4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Task</b> (<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&amp;) noexcept</td></tr>
<tr class="separator:a875d31097031c376bb5574327fd753c4 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ad143f47d9625fd79de414b8940b8af inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a4ad143f47d9625fd79de414b8940b8af"></a>
<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&amp;) noexcept</td></tr>
<tr class="separator:a4ad143f47d9625fd79de414b8940b8af inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa237da8cc6ad923b46e1d3dd1a030fec inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aa237da8cc6ad923b46e1d3dd1a030fec">IsValid</a> () const</td></tr>
<tr class="memdesc:aa237da8cc6ad923b46e1d3dd1a030fec inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this <code><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task.">Task</a></code> object owns an actual task (not <code><a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56ab10913c938482a8aa4ba85b7a1116cb4" title="Unusable.">State::kInvalid</a></code>)  <a href="../../d8/d7c/classengine_1_1Task.html#aa237da8cc6ad923b46e1d3dd1a030fec">More...</a><br /></td></tr>
<tr class="separator:aa237da8cc6ad923b46e1d3dd1a030fec inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6054a42ab82b13141086338ce9ec79c6 inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a6054a42ab82b13141086338ce9ec79c6"></a>
<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a6054a42ab82b13141086338ce9ec79c6">GetState</a> () const</td></tr>
<tr class="memdesc:a6054a42ab82b13141086338ce9ec79c6 inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the task State. <br /></td></tr>
<tr class="separator:a6054a42ab82b13141086338ce9ec79c6 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914cb84ac258bb295849989fd29303f3 inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a914cb84ac258bb295849989fd29303f3"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a914cb84ac258bb295849989fd29303f3">IsFinished</a> () const</td></tr>
<tr class="memdesc:a914cb84ac258bb295849989fd29303f3 inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the task finished execution. <br /></td></tr>
<tr class="separator:a914cb84ac258bb295849989fd29303f3 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a919b59746cb2603e7b189c4ac619d inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a36a919b59746cb2603e7b189c4ac619d">Wait</a> () const noexcept(false)</td></tr>
<tr class="memdesc:a36a919b59746cb2603e7b189c4ac619d inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or caller is cancelled. Can be called from coroutine context only. For non-coroutine context use <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a779d698abc4a6dd681e48441f513cd4a">BlockingWait()</a>.  <a href="../../d8/d7c/classengine_1_1Task.html#a36a919b59746cb2603e7b189c4ac619d">More...</a><br /></td></tr>
<tr class="separator:a36a919b59746cb2603e7b189c4ac619d inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4570fc751a4ae795ff291b07620b662e inherit pub_methods_classengine_1_1Task"><td class="memTemplParams" colspan="2">template&lt;typename Rep , typename Period &gt; </td></tr>
<tr class="memitem:a4570fc751a4ae795ff291b07620b662e inherit pub_methods_classengine_1_1Task"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a4570fc751a4ae795ff291b07620b662e">WaitFor</a> (const std::chrono::duration&lt; Rep, Period &gt; &amp;) const noexcept(false)</td></tr>
<tr class="memdesc:a4570fc751a4ae795ff291b07620b662e inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or after the specified timeout or until caller is cancelled.  <a href="../../d8/d7c/classengine_1_1Task.html#a4570fc751a4ae795ff291b07620b662e">More...</a><br /></td></tr>
<tr class="separator:a4570fc751a4ae795ff291b07620b662e inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b40cc5efcf7357b246b169fc6abc10 inherit pub_methods_classengine_1_1Task"><td class="memTemplParams" colspan="2">template&lt;typename Clock , typename Duration &gt; </td></tr>
<tr class="memitem:a09b40cc5efcf7357b246b169fc6abc10 inherit pub_methods_classengine_1_1Task"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a09b40cc5efcf7357b246b169fc6abc10">WaitUntil</a> (const std::chrono::time_point&lt; Clock, Duration &gt; &amp;) const noexcept(false)</td></tr>
<tr class="memdesc:a09b40cc5efcf7357b246b169fc6abc10 inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or until the specified time point is reached or until caller is cancelled.  <a href="../../d8/d7c/classengine_1_1Task.html#a09b40cc5efcf7357b246b169fc6abc10">More...</a><br /></td></tr>
<tr class="separator:a09b40cc5efcf7357b246b169fc6abc10 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5bb7666977214b44244dc6d3c45430b inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#af5bb7666977214b44244dc6d3c45430b">WaitUntil</a> (<a class="el" href="../../de/d6a/classengine_1_1Deadline.html">Deadline</a>) const</td></tr>
<tr class="memdesc:af5bb7666977214b44244dc6d3c45430b inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or until the specified deadline is reached or until caller is cancelled.  <a href="../../d8/d7c/classengine_1_1Task.html#af5bb7666977214b44244dc6d3c45430b">More...</a><br /></td></tr>
<tr class="separator:af5bb7666977214b44244dc6d3c45430b inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af38546bfc7a0d3b86387980ce48bbb98 inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#af38546bfc7a0d3b86387980ce48bbb98">Detach</a> () &amp;&amp;</td></tr>
<tr class="memdesc:af38546bfc7a0d3b86387980ce48bbb98 inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches task, allowing it to continue execution out of scope.  <a href="../../d8/d7c/classengine_1_1Task.html#af38546bfc7a0d3b86387980ce48bbb98">More...</a><br /></td></tr>
<tr class="separator:af38546bfc7a0d3b86387980ce48bbb98 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7571e37ab539ef8cea8c29b69a604779 inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a7571e37ab539ef8cea8c29b69a604779"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a7571e37ab539ef8cea8c29b69a604779">RequestCancel</a> ()</td></tr>
<tr class="memdesc:a7571e37ab539ef8cea8c29b69a604779 inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queues task cancellation request. <br /></td></tr>
<tr class="separator:a7571e37ab539ef8cea8c29b69a604779 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96cf988764c95fc158d9a3cf55ffe607 inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a96cf988764c95fc158d9a3cf55ffe607"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a96cf988764c95fc158d9a3cf55ffe607">SyncCancel</a> () noexcept</td></tr>
<tr class="memdesc:a96cf988764c95fc158d9a3cf55ffe607 inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels the task and suspends execution until it is finished. Can be called from coroutine context only. For non-coroutine context use <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a7571e37ab539ef8cea8c29b69a604779" title="Queues task cancellation request.">RequestCancel()</a> + <a class="el" href="../../d8/d7c/classengine_1_1Task.html#a779d698abc4a6dd681e48441f513cd4a">BlockingWait()</a>. <br /></td></tr>
<tr class="separator:a96cf988764c95fc158d9a3cf55ffe607 inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28f948fafb961d05c43d8f4512963a3e inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a28f948fafb961d05c43d8f4512963a3e"></a>
<a class="el" href="../../dc/d3f/namespaceengine.html#a0d5218b35f5861d406b7d3f8868d5cfd">TaskCancellationReason</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a28f948fafb961d05c43d8f4512963a3e">CancellationReason</a> () const</td></tr>
<tr class="memdesc:a28f948fafb961d05c43d8f4512963a3e inherit pub_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets task cancellation reason. <br /></td></tr>
<tr class="separator:a28f948fafb961d05c43d8f4512963a3e inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779d698abc4a6dd681e48441f513cd4a inherit pub_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a779d698abc4a6dd681e48441f513cd4a">BlockingWait</a> () const</td></tr>
<tr class="separator:a779d698abc4a6dd681e48441f513cd4a inherit pub_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classengine_1_1Task"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classengine_1_1Task')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../d8/d7c/classengine_1_1Task.html">engine::Task</a></td></tr>
<tr class="memitem:a0a63c2f3a54e69f1895732982d6dbf88 inherit pub_static_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a0a63c2f3a54e69f1895732982d6dbf88"></a>
static const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>GetStateName</b> (<a class="el" href="../../d8/d7c/classengine_1_1Task.html#aea155522d1b4987a303f44b6a00f1a56">State</a> state)</td></tr>
<tr class="separator:a0a63c2f3a54e69f1895732982d6dbf88 inherit pub_static_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classengine_1_1Task"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classengine_1_1Task')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../d8/d7c/classengine_1_1Task.html">engine::Task</a></td></tr>
<tr class="memitem:a2bbea13143621815d829d7e87516d335 inherit pro_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a2bbea13143621815d829d7e87516d335"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Task</b> (const <a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;)</td></tr>
<tr class="separator:a2bbea13143621815d829d7e87516d335 inherit pro_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a8657600d602e6ea2302cdde8ce613 inherit pro_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a35a8657600d602e6ea2302cdde8ce613"></a>
<a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="../../d8/d7c/classengine_1_1Task.html">Task</a> &amp;)</td></tr>
<tr class="separator:a35a8657600d602e6ea2302cdde8ce613 inherit pro_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d7bfae8e0aee62321eec611e4a3c8db inherit pro_methods_classengine_1_1Task"><td class="memItemLeft" align="right" valign="top"><a id="a6d7bfae8e0aee62321eec611e4a3c8db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7c/classengine_1_1Task.html#a6d7bfae8e0aee62321eec611e4a3c8db">Invalidate</a> ()</td></tr>
<tr class="memdesc:a6d7bfae8e0aee62321eec611e4a3c8db inherit pro_methods_classengine_1_1Task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks task as invalid. <br /></td></tr>
<tr class="separator:a6d7bfae8e0aee62321eec611e4a3c8db inherit pro_methods_classengine_1_1Task"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A task that tries to acquire a distributed lock and runs user callback once while the lock is held. </p><dl class="section see"><dt>See also</dt><dd>AlwaysBusyDistLockStrategy </dd></dl>
<h2><a class="anchor" id="autotoc_md403"></a>
Example with retrying</h2>
<div class="fragment"><div class="line">  <span class="keyword">auto</span> strategy = GetSomeDistLockStrategyForTheSample();</div>
<div class="line">  std::atomic&lt;std::size_t&gt; counter = 0;</div>
<div class="line">  <a class="code" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">dist_lock::DistLockedTask</a> locked_task(</div>
<div class="line">      <span class="stringliteral">&quot;example&quot;</span>,</div>
<div class="line">      [&amp;]() {</div>
<div class="line">        counter++;</div>
<div class="line">        <span class="keywordflow">if</span> (counter &lt; 5) {</div>
<div class="line">          <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">      },</div>
<div class="line">      strategy);</div>
<div class="line"> </div>
<div class="line">  UEXPECT_NO_THROW(locked_task.Get());</div>
<div class="line">  EXPECT_EQ(counter, 5);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md404"></a>
Example without retrying</h2>
<div class="fragment"><div class="line">  <span class="keyword">auto</span> strategy = GetSomeDistLockStrategyForTheSample();</div>
<div class="line">  std::atomic&lt;std::size_t&gt; counter = 0;</div>
<div class="line">  <a class="code" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">dist_lock::DistLockedTask</a> locked_task(</div>
<div class="line">      <span class="stringliteral">&quot;example&quot;</span>,</div>
<div class="line">      [&amp;]() {</div>
<div class="line">        counter++;</div>
<div class="line">        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;123&quot;</span>);</div>
<div class="line">      },</div>
<div class="line">      strategy, <span class="comment">/*default settings*/</span> {}, <a class="code" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8" title="waits until distlock becomes free">dist_lock::DistLockWaitingMode::kWait</a>,</div>
<div class="line">      <a class="code" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460af8fe6931a45bd59dec2b38cddcfb17d3" title="Don&#39;t retry on user exception/lock drop.">dist_lock::DistLockRetryMode::kSingleAttempt</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    locked_task.<a class="code" href="../../db/d80/classengine_1_1TaskWithResult.html#a3b5802799716e29c5cd038fb28a9340d" title="Returns (or rethrows) the result of task invocation. After return from this method the task is not va...">Get</a>();</div>
<div class="line">    FAIL() &lt;&lt; <span class="stringliteral">&quot;Should have thrown&quot;</span>;</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::runtime_error&amp; exception) {</div>
<div class="line">    EXPECT_EQ(exception.what(), std::string(<span class="stringliteral">&quot;123&quot;</span>));</div>
<div class="line">  }</div>
<div class="line">  EXPECT_EQ(counter, 1);</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html#l00039">39</a> of file <a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html">dist_locked_task.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1f9b35564f90b9c20d7dd885196d6170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f9b35564f90b9c20d7dd885196d6170">&#9670;&nbsp;</a></span>DistLockedTask() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dist_lock::DistLockedTask::DistLockedTask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default constructor. Creates an invalid task. </p>

</div>
</div>
<a id="af36b6fc598efd16fc164878afcab92f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af36b6fc598efd16fc164878afcab92f1">&#9670;&nbsp;</a></span>DistLockedTask() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dist_lock::DistLockedTask::DistLockedTask </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WorkerFunc&#160;</td>
          <td class="paramname"><em>worker_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt;&#160;</td>
          <td class="paramname"><em>strategy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1">DistLockWaitingMode</a>&#160;</td>
          <td class="paramname"><em>mode</em> = <code><a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8">DistLockWaitingMode::kWait</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460">DistLockRetryMode</a>&#160;</td>
          <td class="paramname"><em>retry_mode</em> = <code><a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460a7d38367a395df05d79abf44f3bd9f7cb">DistLockRetryMode::kRetry</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a <a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of the task </td></tr>
    <tr><td class="paramname">worker_func</td><td>a callback that is started once we've acquired the lock and is cancelled when the lock is lost. </td></tr>
    <tr><td class="paramname">settings</td><td>distributed lock settings </td></tr>
    <tr><td class="paramname">strategy</td><td>distributed locking strategy </td></tr>
    <tr><td class="paramname">mode</td><td>distributed lock waiting mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><code>worker_func</code> must honour task cancellation and stop ASAP when it is cancelled, otherwise brain split is possible (IOW, two different users do work assuming both of them hold the lock, which is not true). </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a61b590719a0a20f1ad5729c269ce1193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b590719a0a20f1ad5729c269ce1193">&#9670;&nbsp;</a></span>GetLockedDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;std::chrono::steady_clock::duration&gt; dist_lock::DistLockedTask::GetLockedDuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns for how long the lock is held (if held at all). Returned value may be less than the real duration. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>userver/dist_lock/<a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html">dist_locked_task.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/>
<a id='page_edit' style="float:left; padding-left: 7pt;" href="#">⚒ Редактировать страницу</a>
<address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
<script type="text/javascript">
const LOWER_CASE_TRANSLITTERATION_MAPPING = {
    "а":"a", "б":"b", "в":"v", "г":"g", "д":"d", "е":"e", "ё":"jo", "ж":"zh",
    "з":"z", "и":"i", "й":"jj", "к":"k", "л":"l", "м":"m", "н":"n", "о":"o",
    "п":"p", "р":"r", "с":"s", "т":"t", "у":"u", "ф":"f", "х":"x", "ц":"c",
    "ч":"ch", "ш":"sh", "щ":"shh", "ъ":"\'", "ы":"y", "ь":"\'", "э":"je",
    "ю":"ju", "я":"ja"
};
const DOXYGEN_DIAMOND_STRING = '◆\u00A0' // ◆&nbsp;
function make_id(raw_id) {
    return raw_id.toLowerCase().split('').map(function (char) {
        return LOWER_CASE_TRANSLITTERATION_MAPPING[char] || char;
    }).join('').replace(/\W/g, '');
}
const html_escape = function () {
    const p = document.createElement('p');
    return function (text) {
        p.textContent = text;
        return p.innerHTML;
    };
}();
function setup_page_edit() {
    let href = window.location.href;
    const idx = href.indexOf('md_ru_');
    if (idx === -1) {
        $('#page_edit').hide();
        return;
    }
    href = href.substring(idx).split('.html')[0];
    href = href.split('#')[0];
    href = href.replace('md_ru_', 'https://wiki.yandex-team.ru/taxi/backend/');
    href = href.replaceAll('_', '/');
    $('#page_edit').attr("href", href + '/.edit');
}
function draw_toc() {
    let headers = $(':header');
    if (headers.length === 0) {
        return;
    }
    let sidenav_content = '<div id="mySidenav" class="sidenav">';
    sidenav_content += '<h2>Table of contents</h2>';
    headers.each(function() {
        let index = parseInt(this.nodeName.substring(1)) - 1;
        const header = $(this);
        let id = header.attr('id');
        if (!id) {
          id = make_id(header.text())
          header.attr('id', id);
        }
        let header_text = header.text()
        if (header_text.startsWith(DOXYGEN_DIAMOND_STRING)) {
            ++index;
            header_text = header_text.substring(DOXYGEN_DIAMOND_STRING.length);
        }
        sidenav_content += ''
          + '<a href="#' + id + '" style="padding-left: ' + index * 15 + 'px">'
          + '•&nbsp;' + html_escape(header_text)
          + '</a>'
        ;
        header.append(' <a class="hoverlink" href="#' + id + '">🔗</a>')
    });
    sidenav_content += '</div>';
    $(sidenav_content).insertAfter('.header');
}
function highlight_code() {
    if (window.location.href.indexOf("pp_source") !== -1
        || window.location.href.indexOf("cpp-example") !== -1) {
        // Header listing is already nicely highlighted by Doxygen
        return;
    }
    hljs.configure({
        tabReplace: '    ' // 4 spaces
    });
    hljs.registerAliases('py', {languageName: 'python'});
    hljs.registerAliases('sh', {languageName: 'shell'});
    hljs.registerAliases('bash', {languageName: 'shell'});
    hljs.registerAliases('yml', {languageName: 'yaml'});
    hljs.registerAliases('plain', {languageName: 'plaintext'});
    hljs.registerAliases('tskv', {languageName: 'plaintext'});
    $(".fragment").each(function() {
        const node = $(this);
        let data = '';
        let language = '';
        let requires_higlighting = true;
        node.children('div.line').each(function(i) {
            line = $(this).text();
            // Doxygen 1.8.11 workaround to remove line numbers.
            // No line numbers added in Doxygen 1.8.13
            line = line.replace(/^ *\d+\xA0/, '');
            if (i === 0) {
                line = line.trimLeft().replace(/^# /, '');
                if (line === 'autodetect') {
                    return true;
                } else if (hljs.getLanguage(line)) {
                    language = line;
                    return true;
                } else {
                    requires_higlighting = false;
                    return false;
                }
            }
            data += line + '\n';
        });
        if (requires_higlighting === false) {
            return;
        }
        if (language !== '') {
            data = hljs.highlight(language, data).value;
        } else {
            data = hljs.highlightAuto(data).value;
        }
        node.replaceWith('<div class="fragment"><pre>' + data + '</pre></div>');
    });
}
function setup_if_landing() {
    if (document.getElementById('landing_logo_id') === null) {
        return false;
    }
    $('#titlearea').hide();
    const main_nav = $('#main-nav')
    main_nav.addClass('main-nav-landing');
    main_nav.append('<hr>');
    $('.header').hide();
    $('body').css('background-color', 'black');
    $('#page_edit').hide();
    return true;
}
function sticky_menu() {
    const main_nav = $('#main-nav');
    const menu_y_position = 94;
    const search_results_window = $('#MSearchResultsWindow');
    var menu_is_sticky = false;
    const stick = function () {
        if ($(this).scrollTop() > menu_y_position) {
            if (menu_is_sticky) return;
            search_results_window.addClass('stickySearchResults');
            main_nav.addClass('stickyHeader');
            menu_is_sticky = true;
        } else {
            if (!menu_is_sticky) return;
            search_results_window.removeClass('stickySearchResults');
            // 'top' property of the results window is computed by Doxygen JS
            // and it may give bad results if the computation is invoked at the
            // middle of the page.
            //
            // Hiding the window. Doxygen will recompute and show it on new
            // user input.
            search_results_window.hide();
            main_nav.removeClass('stickyHeader');
            menu_is_sticky = false;
        }
    };
    stick();  // on page refresh draw the menu on a right position
    $(window).on("scroll", stick);
}
function telegram_channel_language() {
  if (/^ru/.test(navigator.language)) {
    const channel = $('#telegram_channel');
    if (channel) {
      channel.attr('href', 'https://t.me/+AdadhDPVG5xhNWRi');
    }
  }
}
$(function() {
    if (setup_if_landing()) return;
    draw_toc();
    highlight_code();
    setup_page_edit();
    telegram_channel_language();
    sticky_menu();
});
</script>
</body>
</html>
